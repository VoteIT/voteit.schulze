<tal:main xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="voteit.schulze">
	
<tal:summary condition="not complete">
	<tal:iterate repeat="winner result.get('winners', ())">
		<tal:proposal
			define="brain api.get_metadata_for_query(uid=winner)[0]" 
			replace="structure api.render_single_view_component(api.context, api.request, 'proposal', 'block', brain=brain)">
	    	Proposal
	    </tal:proposal>
    </tal:iterate>
   	
    <div class="denied">
    <tal:iterate repeat="looser result['candidates'] - result.get('winners', set())">
		<tal:proposal
			define="brain api.get_metadata_for_query(uid=looser)[0]" 
			replace="structure api.render_single_view_component(api.context, api.request, 'proposal', 'block', brain=brain)">
	    	Proposal
	    </tal:proposal>
    </tal:iterate>
   	</div>
</tal:summary>
	
<tal:complete condition="complete">
    
	<h4 i18n:translate="">Approved</h4>
	<tal:iterate repeat="winner result.get('winners', ())">
	    <div class="proposal wf-state-approved" tal:define="proposal get_proposal_by_uid(winner)">
	        <div class="icon iconpadding approved" tal:content="structure proposal.title">Title</div>
	        <div class="meta" i18n:translate="">Created by <span i18n:name="userid" tal:replace="proposal.creators[0]">userid</span></div>
	    </div>
	</tal:iterate>
	
	<div class="toggle_area toggle_closed">
	    <a class="toggle_minimize read_more" i18n:translate="">Poll result details</a>
	    <div class="minimizable_area">
	        <h4 i18n:translate="">About this poll</h4>
	        <table>
	            <tr>
	                <th i18n:translate="">Number of voters:</th>
	                <td tal:content="no_users">3</td>
	            </tr>
	            <tr>
	                <th i18n:translate="">Possible winners:</th>
	                <td tal:content="no_winners">1</td>
	            </tr>
	            <tr tal:condition="result['tie_breaker']|False">
	                <th i18n:translate="">Poll was a tie breaker between:</th>
	                <td>
	                    <ul>
	                        <tal:iterate repeat="tied result['tie_breaker']">
	                        <tal:def define="proposal get_proposal_by_uid(tied)">
	                            <li tal:content="structure proposal.title">Title</li>
	                        </tal:def>
	                        </tal:iterate>
	                    </ul>
	                </td>
	            </tr>
	        </table>
	
	        <tal:denied define="denied_proposals result['candidates'] - result.get('winners', set())">
	            <h4 i18n:translate="">Denied</h4>
	
	            <div tal:condition="not denied_proposals" i18n:translate="">No proposals were denied in this poll</div>
	
	            <div class="proposal" tal:condition="denied_proposals" tal:repeat="denied denied_proposals">
	                <tal:defs define="proposal get_proposal_by_uid(denied)">
	                    <div class="icon iconpadding denied" tal:content="structure proposal.title">Title</div>
	                </tal:defs>
	            </div>
	        </tal:denied>
	
	        <h4 i18n:translate="">Raw data</h4>
	        <div i18n:translate="">This file contains all the raw data that was used in the calculation of the result.</div>
	        <a href="${raw_data_link}" target="_blank" i18n:translate="">Raw data</a>
	    </div>
	    <div class="minimizable_inverted meta" i18n:translate="">Click above to see denied proposals and other details</div>
	</div>
</tal:complete>
</tal:main>